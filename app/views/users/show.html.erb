<div class="mypage">
  <h1>マイページ</h1>
  <p>名前 : <%= @user.name %></p>
  <p>メールアドレス : <%= @user.email %></p>
  <p>プロフィール : <%= @user.profile %></p>

  <% if current_user.id == @user.id %>
    <%= link_to "編集する", edit_user_registration_path, class: "edit-btn" %>
  <% end %>
</div>

  <div class="likes-header">
    <h2>あなたがいいねしたお土産</h2>
  </div>


<div class="tweets-container">
  <% @user.liked_tweets.each do |t| %>
    <div class="tweet">
      <% if t.image.attached? %>
        <%= image_tag t.image, size: '250x200', class: "tweet-image" %>
      <% end %>

      <div class="tweet-content">
        <div class="tweet-header">
          <p class="tweet-name"><%= t.name %></p>
          <p class="tweet-price"><%= t.price %>円</p>
        </div>

        <div class="tweet-meta">
          <div class="tweet-rating">
            <span class="rating-label">限定度：</span>
            <div class="star-rating">
              <span class="star-rating-front" style="width: <%= getPercent(t.overall) %>%;">★★★★★</span>
              <span class="star-rating-back">★★★★★</span>
            </div>
          </div>

          <div class="like-button">
            <% if user_signed_in? %>
              <% if current_user.already_liked?(t) %>
                <%= button_to tweet_like_path(id: t.id, tweet_id: t.id), method: :delete do %>
                  <i class="fas fa-heart fa-lg" style="color:crimson;"></i><%= t.likes.count %>
                <% end %>
              <% else %>
                <%= button_to tweet_likes_path(id: t.id, tweet_id: t.id), method: :post do %>
                  <i class="fas fa-heart fa-lg" style="color:crimson;"></i><%= t.likes.count %>
                <% end %>
              <% end %>
            <% else %>
              <i class="far fa-heart"></i><%= t.likes.count %>
            <% end %>
          </div>
        </div>

        <p class="tweet-about"><%= t.about %></p>
      </div>
    </div>
  <% end %>
</div>

<!-- ここまで-->

<%= link_to "トップページに戻る", tweets_path %>